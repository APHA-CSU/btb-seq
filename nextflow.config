/* Basic configuration for the Bovine TB pipeline */

manifest {
	author = "Richard Ellis"
	homePage = "https://github.com/APHA-CSU/btb-seq"
    description = "This is the updated pipeline for APHA's processing of Mycobacterium bovis WGS data. This has been built to run using nextflow"
    mainScript = "main.nf"
}

/* remove contents of work directory after pipeline completes sucessfully */ 
cleanup = true

/* declare param to remove large intermediary files from some processes */
params.rmInter = true

/* Docker options */
docker {
    enabled = 'true'
    fixOwnership = 'true'
    runOptions = '--user "$(id -u):$(id -g)"'
}

/* location of reference information */

params.ref = "$projectDir/references/Mycbovis-2122-97_LT708304.fas"
params.refgbk = "$projectDir/references/Mycbovis-2122-97_LT708304.gb"
params.rptmask = "$projectDir/references/DataDrivenMerge20.bed"
params.allsites = "$projectDir/references/All-sites.bed"
params.adapters = "$projectDir/references/adapter.fasta"
params.discrimPos = "$projectDir/references/DiscrimPos.tsv"
params.csstable = "$projectDir/references/CSSwithref.csv"

/* params for original assignCluster process */
params.stage1pat = "$projectDir/references/Stage1_patterns/"
params.pypath = "$projectDir/pyscripts/"

/* quality thresholds */
params.min_mean_cov = 8
params.min_cov_snp = 5
params.alt_prop_snp = 0.2
params.min_qual_snp = 150
params.min_qual_nonsnp = 0

/* quality thresholds (variant calling) */
params.MAP_QUAL = 0
params.BASE_QUAL = 10
params.PLOIDY = "1"

/* quality thresholds (snp filtering) */
params.MIN_READ_DEPTH = 8
params.MIN_ALLELE_FREQUENCY_ALT = 0.8
params.MIN_ALLELE_FREQUENCY_REF = 0.7

/* location of dependancies */

params.kraken2db = "/opt/Kraken2/db/minikraken2_v1_8GB/"
