nextflow_workflow {

  name "Test Workflow main.nf"
  script "main.nf"
  workflow "btb_seq"

  test("Should integrate all modules") {

    when {
      params {
        reads = "${projectDir}/tests/data/phix_test/combine_tests/*{R1,R2}*.fastq.gz"
        dataDir = "test"     
        today  = "15Aug25"
        user   = "UnknownUser"
      }
    }

    then {
            assert workflow.success
            with(workflow.out.combineoutput_ch) {
                assert size() >= 1
                assert path(get(0)).md5 == "a7bc09e28573973b7e37e224fabd7821"
            }
    }
  }
}